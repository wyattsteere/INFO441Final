<!DOCTYPE html>
<html>
<head>
    <title>Neighborhood Watch</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <link rel="stylesheet" href="stylesheets/calendar.css">
    <script src="javascripts/api_version.js"></script>
    <script src="javascripts/utils.js"></script>
    <script src="javascripts/reports.js"></script>
    <script src="javascripts/identity.js"></script>
    <script src="javascripts/index.js"></script>
    <script src="javascripts/fetchUtils.js"></script>
    <script src="javascripts/watchs.js"></script>
    <!-- <script src="javascripts/map.js"></script> -->
    <script src="/javascripts/calendar.js"></script>
    <link rel="icon" href="/favicon.png" type="image/x-icon">
</head>
<body onload="init();">
    <nav class="navbar navbar-light bg-light">
        <div id="errorInfo" class="alert alert-danger fade show" role="alert" style="opacity:0"></div>
        <div id="identity_div">loading...</div>
    </nav>
    <h1>Neighborhood Watch</h1>

    <div class="map-section">
        <h2>Neighborhood Watch Map</h2>
        <iframe src="/map.html" width="100%" height="600px" frameborder="0"></iframe>
    </div>

    <h2>Submit a Report</h2>

    <form id="reportForm">
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" required>
        </div>

        <div class="form-group">
            <label for="location">Location:</label>
            <input type="text" id="location" required>
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" rows="4" required></textarea>
        </div>

        <button onclick="postReport()">Submit Report</button>
    </form>

    <div id="feedbackMessage">
        Report submitted successfully!
    </div>

    <div id="reports_box">
        <h2>Reports</h2>
        <div id="reportsContainer">
            Loading reports...
        </div>
    </div>

    <h2 id="watchHeader" style="display: none;">Sign Up for a Watch</h2>
    <form id="watchForm" style="display: none;"> <!-- Default hidden -->
        <div class="form-group">
            <label for="watchDescription">Description:</label>
            <textarea id="watchDescription" rows="2" required></textarea>
        </div>

        <div class="form-group">
            <label for="watchLocation">Location:</label>
            <input type="text" id="watchLocation" required>
        </div>

        <div class="form-group">
            <label for="watchDate">Date:</label>
            <input type="date" id="watchDate" required>
        </div>

        <div class="form-group">
            <label for="watchTimeStart">Start Time:</label>
            <input type="time" id="watchTimeStart" required>
        </div>

        <div class="form-group">
            <label for="watchTimeEnd">End Time:</label>
            <input type="time" id="watchTimeEnd" required>
        </div>

        <button type="button" onclick="postWatch()">Sign Up</button>
    </form>

    <div id="watchFeedbackMessage" style="display:none;">
        Watch signup successful!
    </div>

    <div id="watch_box">
        <h2>Your Neighborhood Watch Times</h2>
        <div id="watchContainer">
            Loading watch times...
        </div>
    </div>

    <div id="calendar_box">
        <h2>Watch Schedule Calendar</h2>
        <div id="calendarContainer">
            Loading calendar...
        </div>
    </div>

</body>
</html>